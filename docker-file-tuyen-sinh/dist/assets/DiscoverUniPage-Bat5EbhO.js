import{r as a,j as t,_ as S,b as w,c as A,H as b}from"./index-qv2f6qUe.js";import{I as E}from"./IndexBackground-BPIzxaN0.js";import{u as j}from"./index-DRIBn9qH.js";import{B as v}from"./Blur-Dyo204vu.js";import{L as k}from"./ListTable-mOjGfO5l.js";import{B as I}from"./MainWarpper-Dh6EhIZe.js";import{f as T}from"./FetchVietnamTime-DpsSIMj-.js";import{f as L}from"./FetchKyThi-BD1j5qFx.js";import{p as N}from"./parseFlexibleDate-Ccvibv4l.js";import"./Header-BwPZUt6b.js";import"./LogoGuest-DAj0gcma.js";import"./useScrollbar-BJwbBr6P.js";const D=({className:h="",type:s=""})=>{const[c,i]=a.useState("Đang tải..."),[e,o]=a.useState(""),[r,n]=a.useState(null),{ref:d,inView:m}=j({triggerOnce:!0,threshold:.2}),l=["hide","start"],[g,f]=a.useState(l[0]);return a.useEffect(()=>{m&&f(l[1])},[m]),a.useEffect(()=>{const u=async()=>{switch(s){case"dai-hoc":o("đại học"),y("/data/htmlHeDaiHoc.txt"),p("dai-hoc-home.jpg");break;case"cao-dang":o("cao đẳng"),i("<p>Thông tin hệ cao đẳng...</p>"),p("cao-dang-home.jpg");break;case"lien-thong":o("liên thông"),i("<p>Thông tin hệ liên thông...</p>"),p("lien-thong-home.jpg");break;default:o("Không xác định"),console.error(`Lỗi type không hợp lệ ${s}`);break}},p=async _=>{try{const x=await S(()=>import("../../../assets/images/"+_),[]);n(x.default)}catch{console.error("Không tìm thấy ảnh:",_),n("")}},y=async _=>{let x="";x=await(await fetch(_)).text(),i(x)};u()},[s]),t.jsxs("section",{className:`introduce-he-section ${h}`,ref:d,children:[t.jsxs("div",{className:"introduce-he-section__header",style:{backgroundImage:r?`url("${r}")`:"none"},children:[t.jsx(v,{}),t.jsxs("h2",{className:`introduce-he-section__title ${g}`,children:["Giới thiệu hệ ",e]})]}),t.jsx("div",{className:"introduce-he-section__container",dangerouslySetInnerHTML:{__html:c}})]})},P=[{name:"John",age:5,description:"A short description"},{name:"Doe",age:15,description:"This is a much longer description that exceeds 60 characters",link:"https://google.com"},{name:"Ngô Đình Minh Trang",age:5,description:"A short description"},{name:"John",age:5,description:"A short description"},{name:"John",age:5,description:"A short description"},{name:"John",age:5,description:"A short description"},{name:"John",age:5,description:"A short description"},{name:"John",age:5,description:"A short description"},{name:"John",age:5,description:"A short description"}],H={name:"tên",age:"tuổi",description:"mô tả"},C=()=>{const{ref:h,inView:s}=j({triggerOnce:!0,threshold:.7});return document.querySelectorAll("tbody tr").forEach(i=>{i.classList.add("hide")}),a.useEffect(()=>{s&&document.querySelectorAll("tbody tr").forEach((o,r)=>{setTimeout(()=>{o.classList.remove("hide"),o.classList.add("start")},r*100)})},[s]),t.jsxs("section",{className:"list-top-section",ref:h,children:[t.jsx("h4",{children:"Danh sách các ngành đang được quan tâm"}),t.jsx(k,{struct:P,headers:H,isNumbering:!0,isRanking:!0})]})},B=({className:h="",timeTarget:s=new Date().getTime()})=>{const[c,i]=a.useState(null),[e,o]=a.useState({days:0,hours:0,minutes:0,seconds:0}),r=typeof s=="number"?s:s instanceof Date?s.getTime():new Date().getTime();return a.useEffect(()=>{let n;return T().then(d=>{let m=d.getTime();i(m),n=window.setInterval(()=>{m+=1e3,i(m)},1e3)}),()=>{n&&clearInterval(n)}},[]),a.useEffect(()=>{if(c===null)return;const n=r-c;if(n<=0){o({days:0,hours:0,minutes:0,seconds:0});return}const d=Math.floor(n/(1e3*60*60*24)),m=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),l=Math.floor(n%(1e3*60*60)/(1e3*60)),g=Math.floor(n%(1e3*60)/1e3);o({days:d,hours:m,minutes:l,seconds:g})},[c]),e.days===0&&e.hours===0&&e.minutes===0&&e.seconds===0?t.jsx(t.Fragment,{}):t.jsxs("div",{className:`countdown-container ${h}`,children:[t.jsxs("div",{className:"countdown-unit",children:[t.jsx("span",{className:"countdown-unit__time",children:e.days}),t.jsx("span",{className:"countdown-unit__name",children:"Ngày"})]}),t.jsxs("div",{className:"countdown-unit",children:[t.jsx("span",{className:"countdown-unit__time",children:e.hours}),t.jsx("span",{className:"countdown-unit__name",children:"Giờ"})]}),t.jsxs("div",{className:"countdown-unit",children:[t.jsx("span",{className:"countdown-unit__time",children:e.minutes}),t.jsx("span",{className:"countdown-unit__name",children:"Phút"})]}),t.jsxs("div",{className:"countdown-unit",children:[t.jsx("span",{className:"countdown-unit__time",children:e.seconds}),t.jsx("span",{className:"countdown-unit__name",children:"Giây"})]})]})},M=({className:h="",type:s=""})=>{const c=w(),i=["Thời gian mở kỳ thi sẽ điễn ra sau:","Kỳ thi đã mở, hãy tham gia ngay!","Kỳ thi đã đóng, cảm ơn bạn đã quan tâm!"],e=["hide","start","loop"],[o,r]=a.useState(e[0]),[n,d]=a.useState({statusNum:2}),{ref:m,inView:l}=j({triggerOnce:!0,threshold:.3});return a.useEffect(()=>{if(l){const g=()=>{setTimeout(()=>{r(e[2]),setTimeout(()=>{r(""),setTimeout(g,5e3)},1250)},5e3)};return r(e[1]),g(),()=>{}}},[l]),a.useEffect(()=>{s&&(async()=>{try{const f=await L(s);if(f.data.length===0)throw new Error("Dữ liệu rỗng!");const u=f.data[0];if(!("timeStart"in u&&"timeEnd"in u))throw new Error("Dữ liệu bị thiếu");const p=await T();if(p.getTime()-N(u.timeStart).getTime()<0){d({statusNum:0,target:u.timeStart});return}if(p.getTime()-N(u.timeEnd).getTime()<0){d({statusNum:1,target:u.timeEnd});return}}catch(f){d({statusNum:2}),console.error(f)}})()},[s]),t.jsxs("section",{className:`bodemlichthi ${h}`,ref:m,children:[t.jsx("div",{className:"blur"}),t.jsxs("div",{children:[t.jsx("h2",{className:"bodemlichthi__title",children:"Thời gian mở kỳ thi"}),t.jsx("p",{className:"bodemlichthi__description",children:i[n.statusNum]}),[0,1].includes(n.statusNum)&&t.jsx(B,{timeTarget:n.target}),n.statusNum===1&&t.jsx(I,{text:"Đăng ký ngay!",className:o,onClick:()=>c("/dang-ky")})]})]})},X=()=>{const h=w(),{type:s}=A(),c=["dai-hoc","cao-dang","lien-thong"];let i="",e="";return(({type:r=""})=>{switch(r){case c[0]:i="đại học",e="dh";break;case c[1]:i="cao đẳng",e="cd";break;case c[2]:i="liên thông",e="lt";break;default:h("/")}})({type:s}),t.jsxs("div",{children:[t.jsx(b,{children:t.jsxs("title",{children:["Tổng quan hệ ",i," - Web tuyển sinh"]})}),t.jsxs(E,{children:[t.jsx(D,{type:s}),t.jsx(C,{}),t.jsx(M,{type:e})]})]})};export{X as default};
